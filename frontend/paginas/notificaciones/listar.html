<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Notificaciones - Inventario Coyahue</title>

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Estilos generales -->
  <link rel="stylesheet" href="/src/css/styles.css">
</head>

<body data-theme="light">

  <!-- TOPBAR (se carga con main.js) -->
  <nav class="topbar d-flex align-items-center justify-content-between px-3" id="app-topbar">
      <!-- Aseguramos que exista un badge para notificaciones -->
      <div id="badge-container" style="position: relative;">
          <span id="badgeNoti"
                class="badge bg-danger"
                style="position:absolute; top:-4px; right:-4px; display:none;">
          </span>
      </div>
  </nav>

  <div class="app-container">

    <!-- SIDEBAR (se carga con main.js) -->
    <aside class="sidebar" id="app-sidebar"></aside>

    <!-- CONTENIDO -->
    <main class="main-content">
      <div class="container-fluid" style="max-width:1100px;">

        <!-- FILTROS -->
        <div class="d-flex gap-2 mb-3 flex-wrap">
          <button class="btn btn-primary btn-sm filtro-noti active" data-filtro="todas">
            <i class="bi bi-ui-checks me-1"></i>Todas
          </button>
          <div class="d-flex gap-2 mb-3 flex-wrap">
            <button class="btn btn-outline-primary btn-sm filtro-noti" data-filtro="mantenimiento">
              <i class="bi bi-gear-fill me-1"></i>Mantenimiento
            </button>

            <button class="btn btn-outline-info btn-sm filtro-noti" data-filtro="garantia">
              <i class="bi bi-shield-check me-1"></i>Garantía
            </button>
          </div>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="fw-bold text-primary m-0">Notificaciones</h4>
          <button id="marcarLeidas" class="btn btn-outline-primary btn-sm">
            <i class="bi bi-check2-circle"></i> Marcar como leídas
          </button>
        </div>

        <!-- LISTA -->
        <div class="card p-0">
          <div id="lista-notificaciones">
            <div class="text-center p-5">
              <div class="spinner-border text-primary"></div>
            </div>
          </div>
        </div>

        <footer class="footer mt-4 text-center">
          <p class="small opacity-75">© 2025 Grupo Coyahue — Sistema de Inventario</p>
        </footer>
      </div>
    </main>
  </div>

  <!-- Modal Notificación -->
  <div class="modal fade" id="modalNotificacion" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">
            <i class="bi bi-bell-fill me-2"></i>Detalle de Notificación
          </h5>
          <button class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <p id="modalNotiMensaje" class="fw-semibold"></p>
          <small id="modalNotiTiempo" class="text-muted"></small>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/src/js/main.js"></script>
  <script type="module" src="/src/js/notificaciones.js"></script>

</body>
</html>
